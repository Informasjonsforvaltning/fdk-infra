---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: rabbitmq
  namespace: flux-system
spec:
  interval: 5m
  chart:
    spec:
      chart: rabbitmq
      version: 0.1.0
      sourceRef:
        kind: HelmRepository
        name: fdk-helm-charts
        namespace: flux-system
  targetNamespace: test
  values:
    # Override values for test environment
    NAMESPACE: test
    FDK_RABBITMQ_VOLUMENAME: fdk-test-rabbitmq
    FDK_RABBITMQ_STORAGESIZE: "10G"
    # Inherit defaults from chart
    FDK_RABBITMQ_MEMORY: "200Mi"
    FDK_RABBITMQ_CPU: "20m"
    FDK_RABBITMQ_IMAGE: "rabbitmq:3.11.18-management"
    FDK_RABBITMQ_NODENAME: "rabbitmq@localhost"